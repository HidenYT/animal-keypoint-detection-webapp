{% extends "base/base.html" %}

{% block title %} Наборы данных для обучения {%endblock%}

{% block content %}
<div class="list-group list-group-flush">
    <div class="list-group-item">
        <div class="row p-1">
          <div class="col fw-bold" role="button" onclick="onSortDatasetsByFieldClickListener('name')">Название</div>
          <div class="col fw-bold" role="button" onclick="onSortDatasetsByFieldClickListener('created_at')">Загружено</div>
          <div class="col fw-bold" role="button" onclick="onSortDatasetsByFieldClickListener('updated_at')">Обновлено</div>
          <div class="col fw-bold"></div>
        </div>
    </div>
    {% for dataset in datasets %}
    <div class="list-group-item list-group-item-action">
        <div class="row">
            <div class="col fw-bold">{{ dataset.name }}</div>
            <div class="col">{{dataset.created_at.strftime("%d/%m/%Y %H:%M")}}</div>
            <div class="col">{{dataset.updated_at.strftime("%d/%m/%Y %H:%M")}}</div>
            <div class="col">
                <a href="{{ url('train_datasets_manager:train_dataset_data', kwargs={'id': dataset.id}) }}" class="btn btn-outline-success">
                    <i class="bi bi-cloud-arrow-down-fill"></i>
                </a>
                <a href="{{ url('train_datasets_manager:edit_train_dataset', kwargs={'id': dataset.id}) }}" class="btn btn-outline-primary">
                    <i class="bi bi-pencil-square"></i>
                </a>
                <a href="{{ url('train_datasets_manager:delete_train_dataset', kwargs={'id': dataset.id}) }}" class="btn btn-outline-danger" >
                    <i class="bi bi-trash-fill"></i>
                </a>
                <a data-bs-toggle="collapse" href="#descriptionCollapse{{loop.index}}" class="btn btn-outline-primary">
                    <i class="bi bi-card-text"></i>
                </a>
            </div>
        </div>
    </div>
    <div class="collapse" id="descriptionCollapse{{loop.index}}">
        <div class="container p-2">
            {% if dataset.description %}
            {% for line in dataset.description.split('\n') %}
            <p>{{line}}</p>
            {% endfor %}
            {% else %}
            <span class="text-muted">Описание отсутствует</span>
            {% endif %}
        </div>
      </div>
    {% endfor %}
</div>
{% endblock %}